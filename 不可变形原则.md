**不可变形原则**

1. 不要提供”setter”方法——改变字段和字段指向的对象的方法
2. 将所有字段都设置为final和static
3. 不允许子类重写方法——最简单实现这一点的方式就是将类声明为final。更加有经验的方法是将构造器私有并且在工厂方法中产生实例
4. 如果实例域包括指向可变对象的引用，不允许这些对象被改变
   - 不要提供改变可变对象的方法
   - 不要共享可变对象的引用，从不存储传递给构造函数的外部可变对象引用。如果有必要，创建副本，并将引用存储到副本中。同样，在需要时创建内部可变对象的副本，以避免在方法中返回原始对象。

**最左匹配原则中，有如下说明：**

1. 最左前缀匹配原则，非常重要的原则，mysql会一直向右匹配直到遇到范围查询(>、<、between、like)就停止匹配，比如a = 1 and b = 2 and c > 3 and d = 4 如果建立(a,b,c,d)顺序的索引，d是用不到索引的，如果建立(a,b,d,c)的索引则都可以用到，a,b,d的顺序可以任意调整。
2. =和in可以乱序，比如a = 1 and b = 2 and c = 3 建立(a,b,c)索引可以任意顺序，mysql的查询优化器会帮你优化成索引可以识别的形式





# [唯一索引与主键索引的比较](https://www.cnblogs.com/ymj0906/p/4240856.html)



**唯一索引**
唯一索引不允许两行具有相同的索引值。
如果现有数据中存在重复的键值，则大多数数据库都不允许将新创建的唯一索引与表一起保存。当新数据将使表中的键值重复时，数据库也拒绝接受此数据。例如，如果在 employee 表中的职员姓氏(lname) 列上创建了唯一索引，则所有职员不能同姓。

**主键索引**
主键索引是唯一索引的特殊类型。
数据库表通常有一列或列组合，其值用来唯一标识表中的每一行。该列称为表的主键。
在数据库关系图中为表定义一个主键将自动创建主键索引，主键索引是唯一索引的特殊类型。主键索引要求主键中的每个值是唯一的。当在查询中使用主键索引时，它还允许快速访问数据。

它们的一些比较：
(1)对于主健/unique constraint ， oracle/sql server/mysql等都会自动建立唯一索引；
(2)主键不一定只包含一个字段，所以如果你在主键的其中一个字段建唯一索引还是必要的；
(3)主健可作外健，唯一索引不可；
(4)主健不可为空，唯一索引可；
(5)主健也可是多个字段的组合；
(6)主键与唯一索引不同的是：
a.有not null属性；
b.每个表只能有一个。



### 三定律 

如果对默认方法的工作原理， 特别是在多重继承下的行为还没有把握， 如下三条简单的定 律可以帮助大家。

1. 类胜于接口。 如果在继承链中有方法体或抽象的方法声明， 那么就可以忽略接口中定义 的方法。 
2. 子类胜于父类。 如果一个接口继承了另一个接口， 且两个接口都定义了一个默认方法， 那么子类中定义的方法胜出。
3. 没有规则三。 如果上面两条规则不适用， 子类要么需要实现该方法， 要么将该方法声明 为抽象方法    